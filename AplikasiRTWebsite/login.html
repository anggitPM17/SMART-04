<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyA04aNBGGhxep1PH0OvpAM5whg-AiDeLgU",
    authDomain: "rt04-pkidul.firebaseapp.com",
    databaseURL: "https://rt04-pkidul-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "rt04-pkidul",
    storageBucket: "rt04-pkidul.appspot.com",
    messagingSenderId: "947143736595",
    appId: "1:947143736595:web:56f3981be0152b2f71c68e"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Proses login menggunakan Firebase Authentication
  document.getElementById('login-form').addEventListener('submit', function (e) {
    e.preventDefault();

    const email = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const captchaInput = parseInt(document.getElementById('captcha').value);

    if (captchaInput !== correctAnswer) {
      alert('Jawaban captcha salah!');
      return;
    }

    signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        alert('Login berhasil!');
        localStorage.setItem('loggedIn', 'true');
        localStorage.setItem('username', user.email);
        window.location.href = 'index.html';  // Ganti dengan halaman tujuan setelah login
      })
      .catch((error) => {
        alert('Username atau password salah!');
      });
  });
</script>
